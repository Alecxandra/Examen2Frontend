<link rel="import" href="/bower_components/polymer/polymer.html">
<link rel="import" href="/bower_components/paper-input/paper-input.html">
<link rel="import" href="/bower_components/paper-button/paper-button.html">
<link rel="import" href="/bower_components/paper-material/paper-material.html">
<link rel="import" href="/bower_components/iron-ajax/iron-ajax.html">
<link rel="import" href="/bower_components/iron-icons/iron-icons.html">
<link rel="import" href="/bower_components/paper-icon-button/paper-icon-button.html">

<dom-module id="state-item" attributes="id text">
  <template>
    
       <paper-icon-button icon="done" on-click="stateTask"></paper-icon-button>
    
    <iron-ajax
               id="ajax"
               handle-as="json"
               method="PUT"
               on-response="handleResponse">
    </iron-ajax>
    
    <style>
     paper-material{
       background-color: #00c853;
     }
    paper-icon-button{
       color:#03a9f4;
     } 
    </style>
  </template>
  
  <script>
    Polymer({
     is: "state-item",
      properties:{
        id:{
          type: String,
          value:""
        },
        text:{
          type: String,
          value:""
        },
        change: {
          type: Boolean,
          value: false,
        },
      },
      stateTask: function(){
         this.$.ajax.url = "http://alecx-box-144703.nitrousapp.com/tasks/" + this.id;
          this.$.ajax.params = {"text":this.text,"state": "true" };
         this.$.ajax.generateRequest();
      },
      handleResponse: function(event) {
         this.change = true;
      },
    });
  </script>
  
</ dom-module>